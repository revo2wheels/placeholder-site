<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Changelog â€” Coach GPT App (v5.1.x)</title>
  <link rel="icon" type="image/png" href="https://avatars.githubusercontent.com/u/44225520?v=4" />
  <link rel="stylesheet" href="assets/css/style.css?v=1.7">
</head>

<body>

  <header>
    <h1>
      <img src="https://avatars.githubusercontent.com/u/44225520?v=4" alt="App Icon" />
      <a href="https://www.cliveking.net">Coach GPT App</a>
    </h1>
    <nav>
      <a href="https://www.cliveking.net#about">About</a>
      <a href="https://www.cliveking.net#features">Features</a>
      <a href="https://www.cliveking.net#Reports">Reports</a>
      <a href="https://www.cliveking.net#Questions">Questions</a>
      <a href="https://www.cliveking.net#samples">Samples</a>
      <a href="https://www.cliveking.net#coach">Coach</a>
      <a href="https://www.cliveking.net#download">Download</a>
      <a href="https://www.cliveking.net#contact">Contact</a>
      <a href="https://www.cliveking.net/changelog.html">CHANGELOG</a>
      <a href="https://www.cliveking.net/pipeline.html" style="font-weight:bold;color:#38bdf8;">DESIGN</a>
    </nav>
  </header>

<main>

<section class="card">
  <h1>ðŸš€ Product Changelog â€” v5.1</h1>
  <p>
    Every micro-version (<code>v5.1.xx</code>) below maps directly to a closed
    <strong>Enhancement</strong> issue in GitHub.
    This page updates automatically when engineering ships.
  </p>
</section>

<section class="card">
  <h2>ðŸ§  Whatâ€™s New (Live)</h2>
  <p id="headline">Loadingâ€¦</p>
</section>

<section class="card">
  <h2>ðŸ§¾ Full Enhancement Log</h2>
  <div id="changelog">Loadingâ€¦</div>
</section>

</main>

<footer>
  <p>&copy; 2026 Clive King Â· Coach GPT App</p>
</footer>

<script>
const API = "https://changelogintervalsicugptcoach.clive-a5a.workers.dev/changelog";

fetch(API)
  .then(r => r.json())
  .then(data => {
    const entries = data.changelog.slice().reverse(); // newest first

    // === HEADLINE ROLLUP ===
    const headline = entries.slice(0, 3).map(e => e.title).join(" â€¢ ");
    document.getElementById("headline").innerText =
      "Recent upgrades: " + headline;

    // === FULL EXPANDABLE LOG ===
    const root = document.getElementById("changelog");
    root.innerHTML = "";

    entries.forEach(e => {
      const block = document.createElement("div");
      block.innerHTML = `
        <details class="card">
          <summary>
            <strong>${e.version}</strong> â€” ${e.title}
            <span style="float:right;color:#777;font-size:0.9em">${e.date}</span>
          </summary>
          <div style="margin-top:1rem;white-space:pre-wrap;">
            ${e.body || "No description provided."}
            <p style="margin-top:1rem">
              <a href="${e.url}" target="_blank">View on GitHub â†’</a>
            </p>
          </div>
        </details>
      `;
      root.appendChild(block);
    });
  })
  .catch(() => {
    document.getElementById("changelog").innerText =
      "Unable to load live changelog.";
  });
</script>

</body>
</html>
